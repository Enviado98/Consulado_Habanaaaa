<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Calendario Consular La Habana 🇪🇸🇨🇺</title>

<link rel="icon" type="image/x-icon" href="https://img.icons8.com/color/48/000000/spain-flag.png"> 
<link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800;900&display=swap" rel="stylesheet">

<link rel="stylesheet" href="styles.css"> 
<style id="dynamicTickerStyles"></style>

</head>
<body>

<header>
  <h1>🇪🇸 Calendario de Trámites Consulares 🇨🇺</h1>
  <p>Información de plazos y fechas aproximadas al <span id="fecha-actualizacion">Cargando...</span></p>
  <div class="header-action-container">
    <a href="news.html" class="news-btn-v2" role="button">🔴 Noticias aquí 👈🏻</a>
  </div>
  
  <div id="viewCounter" class="view-counter" aria-live="polite">
    </div>

</header>

<div id="statusPanel" class="status-panel-container">
    <div class="status-panel-header">
        <span>ESTADO ECONÓMICO Y ENERGÉTICO 🚨</span>
        <span id="lastEditedTime">Última edición: Cargando...</span>
    </div>
    <div id="statusContent" class="status-panel-content">
        </div>
</div>

<div class="login-controls">
  <div class="status-message-container">
    <span id="statusMessage">Accede a modo edición para actualizar la información</span>
  </div>
  
  <form id="loginForm" class="login-form-container">
    <input type="text" id="adminUser" placeholder="Usuario" required>
    <input type="password" id="adminPass" placeholder="Contraseña" required>
    <button type="submit" id="loginButton" class="primary-admin-btn">🛡️ ACTIVAR EL MODO EDICIÓN</button>
  </form>
  
  <button id="logoutButton" class="primary-admin-btn" style="display: none; background-color: var(--acento-rojo);">🛑 SALIR DEL MODO EDICIÓN</button>
  <div id="adminControlsPanel">
    <div class="admin-group">
        <button id="saveBtn" class="admin-btn">💾 Guardar los Cambios</button>
    </div>
    <div class="admin-group">
        <button id="addNewsBtn" class="admin-btn">✅️ Añadir Noticia al Rodillo</button> 
        <button id="deleteNewsBtn" class="admin-btn">⛔️ Eliminar una Noticia del Rodillo</button> 
    </div>
    </div>
</div>

<div class="container" id="contenedor">
  </div>

<section class="comments-section">
    <h2>🗣️ Comentarios de la Comunidad</h2>
    
    <div class="comments-display-wrap">
        <div id="commentsContainer" class="comments-list-container">
            <p style="text-align: center; color: var(--color-texto-secundario); margin: 15px;">Cargando comentarios...</p>
        </div>
    </div>

    <div class="comment-form-container">
        <input type="text" id="commenterName" placeholder="Tu Nombre" required maxlength="30" aria-label="Tu Nombre">
        <textarea id="commentText" placeholder="Tu Comentario Principal (máx. 250 caracteres)" required maxlength="250" aria-label="Tu Comentario"></textarea>
        <button id="publishCommentBtn">Publicar Comentario</button>
    </div>
</section>

<footer>
    <div>© 2025 Consulado – Todos los Derechos Reservados.</div>
</footer>

<script type="module" src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm"></script>
<script type="module" src="script.js"></script>
<script>
    // Inicia el cronómetro de tiempo en La Habana
    function updateHeaderTime() {
        const options = {
            timeZone: 'America/Havana', 
            day: '2-digit', month: '2-digit', year: 'numeric',
            hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: false
        };
        const formattedDate = new Intl.DateTimeFormat('es-ES', options).format(new Date());

        document.getElementById('fecha-actualizacion').textContent = `${formattedDate} (CUBA)`;
    }
    
    document.addEventListener('DOMContentLoaded', updateHeaderTime);
    setInterval(updateHeaderTime, 1000); // Actualiza cada segundo
</script>

</body>
</html>
