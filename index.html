<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<title>Calendario Consular La Habana</title>
<link rel="icon" type="image/png" sizes="96x96" href="https://raw.githubusercontent.com/Enviado98/Consulado_Habana/main/images.png">
<link rel="apple-touch-icon" href="https://raw.githubusercontent.com/Enviado98/Consulado_Habana/main/images.png">
<link rel="stylesheet" href="styles.css">
<meta name="description" content="Estado en tiempo real de trámites consulares, citas, legalizaciones, tasas de cambio y déficit energético en Cuba.">
<meta property="og:type" content="website">
<meta property="og:title" content="Calendario Consular La Habana">
<meta property="og:description" content="Estado de citas, legalizaciones, Euro/Dólar y déficit. Actualizado en vivo.">
<meta property="og:image" content="https://raw.githubusercontent.com/Enviado98/Consulado_Habana/main/social-preview.jpg">
<meta name="twitter:card" content="summary_large_image">
<meta name="theme-color" content="#f5f5f7">
<style id="dynamicTickerStyles"></style>
</head>
<body>

<!-- HEADER -->
<header>
  <div class="header-inner">
    <div class="header-left">
      <div class="header-flags">
        <span class="flag-es">ES</span>
        <span class="flag-divider"></span>
        <span class="flag-cu">CU</span>
      </div>
      <div class="header-text">
        <h1>Trámites Consulares</h1>
        <p>Habana · Web no oficial · Comunidad</p>
      </div>
    </div>
    <div class="header-right">
      <div id="viewCounter" class="view-counter">···</div>
      <div class="header-badge" id="fecha-actualizacion">···</div>
    </div>
  </div>
</header>

<!-- PANEL ESTADO -->
<div id="statusPanel" class="status-panel-container">
  <div class="status-panel-header">
    <span class="sp-title">Estado económico y energético</span>
    <div class="live-container"><span class="live-dot"></span>EN VIVO</div>
    <span id="lastEditedTime" style="display:none;"></span>
  </div>
  <div id="statusDataContainer" class="status-panel-data">Cargando...</div>
</div>

<!-- TICKER -->
<div id="newsTicker" class="news-ticker-container" style="display:none;">
  <strong class="news-ticker-fixed-label">NOTICIAS</strong>
  <div class="news-ticker-wrap">
    <div id="newsTickerContent" class="news-ticker-content"></div>
  </div>
</div>

<!-- ════════ VISTAS ════════ -->

<!-- TAB 1: CALENDARIO -->
<div id="view-calendario" class="tab-view active">
  <div class="login-controls">
    <div id="statusMessage" class="login-message">Activa modo edición para actualizar información</div>
    <button id="toggleAdminBtn" class="btn btn-primary">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2L3 7v5c0 5.25 3.75 10.15 9 11.25C17.25 22.15 21 17.25 21 12V7L12 2z"/></svg>
      Activar Modo Edición
    </button>
    <div id="adminControlsPanel">
      <button id="saveBtn" class="btn btn-success">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 21H5a2 2 0 01-2-2V5a2 2 0 012-2h11l5 5v11a2 2 0 01-2 2z"/><polyline points="17 21 17 13 7 13 7 21"/><polyline points="7 3 7 8 15 8"/></svg>
        Guardar Cambios
      </button>
    </div>
  </div>

  <div class="container" id="contenedor"></div>
</div>

<!-- TAB 2: NOTICIAS -->
<div id="view-noticias" class="tab-view">
  <div class="tab-top-bar">
    <h2 class="tab-section-title">Noticias</h2>
    <div class="tab-top-actions">
      <button class="glass-add-btn" id="openNewsModalBtn">
        <span class="glass-add-icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
        </span>
        <span>Añadir</span>
      </button>
      <button class="glass-delete-btn" id="deleteNewsBtn">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="3 6 5 6 21 6"/><path d="M19 6l-1 14H6L5 6"/><path d="M10 11v6M14 11v6"/></svg>
      </button>
    </div>
  </div>

  <div class="noticias-admin-btns" id="noticiasAdminBtns" style="display:none!important;"></div>
  <button id="addNewsBtn" style="display:none"></button>

  <div id="noticias-list"><div class="noticias-empty">Cargando noticias...</div></div>
</div>

<!-- MODAL AÑADIR NOTICIA -->
<div id="newsModal" class="modal-overlay" style="display:none;" aria-modal="true" role="dialog">
  <div class="modal-glass">
    <div class="modal-header">
      <span class="modal-title">Nueva Noticia</span>
      <button class="modal-close" id="closeNewsModal" aria-label="Cerrar">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
      </button>
    </div>
    <p class="modal-subtitle">Tu noticia aparecerá en el ticker y en la lista. Cualquier persona puede publicar.</p>
    <textarea id="newsModalText" class="modal-textarea" placeholder="Escribe aquí tu noticia..." maxlength="75"></textarea>
    <div class="modal-meta">
      <span class="modal-char"><span id="newsCharCount">0</span>/75</span>
    </div>
    <button class="modal-submit-btn" id="submitNewsBtn">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.2"><line x1="22" y1="2" x2="11" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/></svg>
      Publicar
    </button>
  </div>
</div>

<!-- TAB 3: CHAT -->
<div id="view-chat" class="tab-view chat-view">
  <h2 class="tab-section-title">Comunidad</h2>

  <div class="comments-display-wrap" id="commentsScroll">
    <div id="commentsContainer">
      <p class="loading-msg">Cargando comentarios...</p>
    </div>
  </div>

  <div class="chat-composer">
    <div class="chat-composer-inner">
      <input type="text" id="commenterName" class="chat-name-input" placeholder="Tu nombre" maxlength="30" autocomplete="off">
      <div class="chat-msg-row">
        <input type="text" id="commentText" class="chat-msg-input" placeholder="Escribe un comentario..." maxlength="250" autocomplete="off">
        <button id="publishCommentBtn" class="chat-send-btn" aria-label="Enviar">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.2"><line x1="22" y1="2" x2="11" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/></svg>
        </button>
      </div>
    </div>
  </div>
</div>

<!-- BARRA INFERIOR + FOOTER -->
<div class="tab-bar-wrap">
<nav class="tab-bar">

  <button class="tab-btn active" data-tab="view-calendario">
    <span class="ti ti-cal">
      <span class="ti-cal-cap"></span>
      <span class="ti-cal-body">
        <span class="ti-cal-row"><i></i><i></i><i></i></span>
        <span class="ti-cal-row"><i></i><i></i><i></i></span>
      </span>
    </span>
    <span class="tab-label">Calendario</span>
  </button>

  <button class="tab-btn" data-tab="view-noticias">
    <span class="ti ti-signal">
      <span class="ti-sig-dot"></span>
      <span class="ti-sig-arc a1"></span>
      <span class="ti-sig-arc a2"></span>
      <span class="ti-sig-arc a3"></span>
    </span>
    <span class="tab-label">Noticias</span>
  </button>

  <button class="tab-btn" data-tab="view-chat">
    <span class="ti ti-bubble">
      <span class="ti-bub-main"><i></i><i></i><i></i></span>
      <span class="ti-bub-tail"></span>
    </span>
    <span class="tab-label">Chat</span>
  </button>

</nav>
<div class="tab-bar-footer">
  Desarrollado por <a href="https://myservicesin.onrender.com" target="_blank" rel="noopener">Render</a>
  &nbsp;·&nbsp; © 2026
</div>
</div>

<script type="module" src="script.js"></script>
</body>
</html>
